<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redhat &mdash; ZoneMinder  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/zmstyle.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Windows 10+ using WSL" href="windows_wsl.html" />
    <link rel="prev" title="Debian" href="debian.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ZoneMinder
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="easydocker.html">An Easy To Use Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="packpack.html">All Distros - A Docker Way to Build ZoneMinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubuntu.html">Ubuntu</a></li>
<li class="toctree-l2"><a class="reference internal" href="debian.html">Debian</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Redhat</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#background-rhel-rocky-linux-and-clones">Background: RHEL, Rocky Linux, and Clones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#background-fedora">Background: Fedora</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-avoid-known-installation-problems">How To Avoid Known Installation Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-install-zoneminder">How to Install ZoneMinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-install-nightly-development-builds">How to Install Nightly Development Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-build-your-own-zoneminder-package">How to Build Your Own ZoneMinder Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-up-your-environment">Set Up Your Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-from-srpm">Build from SRPM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-create-your-own-source-rpm">How to Create Your Own Source RPM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="windows_wsl.html">Windows 10+ using WSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiserver.html">Multi-Server Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="dedicateddrive.html">Dedicated Drive, Partition, or Network Share</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ZoneMinder</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Installation Guide</a></li>
      <li class="breadcrumb-item active">Redhat</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/installationguide/redhat.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="redhat">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Redhat</a><a class="headerlink" href="#redhat" title="Permalink to this heading"></a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#redhat" id="id1">Redhat</a></p>
<ul>
<li><p><a class="reference internal" href="#background-rhel-rocky-linux-and-clones" id="id2">Background: RHEL, Rocky Linux, and Clones</a></p></li>
<li><p><a class="reference internal" href="#background-fedora" id="id3">Background: Fedora</a></p></li>
<li><p><a class="reference internal" href="#how-to-avoid-known-installation-problems" id="id4">How To Avoid Known Installation Problems</a></p></li>
<li><p><a class="reference internal" href="#how-to-install-zoneminder" id="id5">How to Install ZoneMinder</a></p></li>
<li><p><a class="reference internal" href="#how-to-install-nightly-development-builds" id="id6">How to Install Nightly Development Builds</a></p></li>
<li><p><a class="reference internal" href="#how-to-build-your-own-zoneminder-package" id="id7">How to Build Your Own ZoneMinder Package</a></p>
<ul>
<li><p><a class="reference internal" href="#background" id="id8">Background</a></p></li>
<li><p><a class="reference internal" href="#set-up-your-environment" id="id9">Set Up Your Environment</a></p></li>
<li><p><a class="reference internal" href="#build-from-srpm" id="id10">Build from SRPM</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id11">Installation</a></p></li>
<li><p><a class="reference internal" href="#how-to-create-your-own-source-rpm" id="id12">How to Create Your Own Source RPM</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<p>These instructions apply to all Redhat distros and their clones, including but not limited to: Fedora, RHEL, Rocky Linux, Alma Linux, and others. While the installation instructions are the same for each distro, the reason why one might use one distro over the other is different. A short description follows, which is intended to help you chose what distro best fits your needs.</p>
<section id="background-rhel-rocky-linux-and-clones">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Background: RHEL, Rocky Linux, and Clones</a><a class="headerlink" href="#background-rhel-rocky-linux-and-clones" title="Permalink to this heading"></a></h2>
<p>These distributions are classified as enterprise operating systems and have a long operating lifetime of many years. By design, they will not have the latest and greatest versions of any package. Instead, stable packages are the emphasis.</p>
<p>Replacing any core package in these distributions with a newer package from a third party is expressly verboten. The ZoneMinder development team will not do this, and neither should you. If you have the perception that you’ve got to have a newer version of php, mysql, gnome, apache, etc. then, rather than upgrade these packages, you should instead consider using a different distribution such as Fedora.</p>
<p>The ZoneMinder team will not provide support for systems which have had any core package replaced with a package from a third party.</p>
</section>
<section id="background-fedora">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Background: Fedora</a><a class="headerlink" href="#background-fedora" title="Permalink to this heading"></a></h2>
<p>One can think of Fedora as RHEL Beta. This is, in fact, what it is. Fedora is primarily geared towards development and testing of newer, sometimes bleeding edge, packages. The ZoneMinder team uses this distro to determine the interoperability of ZoneMinder with the latest and greatest versions of packages like mysql, apache, systemd, and others. If a problem is detected, it will be addressed long before it makes it way into RHEL.</p>
<p>Fedora has a short life-cycle of just 6 months. Fedora 36 is the last release supporting armv7 architecture, and consequently Raspberry Pis earlier than the Raspberry Pi 2 v 1.2. F36 is end-of-life in May 2023.</p>
<p>If you desire newer packages than what is available in RHEL or its clones, you should consider using Fedora.</p>
</section>
<section id="how-to-avoid-known-installation-problems">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">How To Avoid Known Installation Problems</a><a class="headerlink" href="#how-to-avoid-known-installation-problems" title="Permalink to this heading"></a></h2>
<p>The following notes are based on real problems which have occurred by those who came before you:</p>
<ul class="simple">
<li><p>Zmrepo assumes you have installed the underlying distribution <strong>using the official installation media for that distro</strong>. Third party “Spins” may not work correctly.</p></li>
<li><p>ZoneMinder is intended to be installed in an environment dedicated to ZoneMinder. While ZoneMinder will play well with many applications, some invariably will not. Asterisk is one such example.</p></li>
<li><p>Be advised that you need to start with a clean system before installing ZoneMinder.</p></li>
<li><p>If you have previously installed ZoneMinder from-source, then your system is <strong>NOT</strong> clean. You must manually search for and delete all ZoneMinder related files first (look under /usr/local). Issuing a “make uninstall” helps, but it will not do this for you correctly. You <strong>WILL</strong> have problems if you ignore this step.</p></li>
<li><p>Unlike Debian/Ubuntu distros, it is not necessary, and not recommended, to install a LAMP stack ahead of time.</p></li>
<li><p>Disable any other third party repos and uninstall any of ZoneMinder’s third party dependencies, which might already be on the system, especially ffmpeg and vlc. Attempting to install dependencies yourself often causes problems.</p></li>
<li><p>Each ZoneMinder rpm includes a README file under /usr/share/doc. You must follow all the steps in this README file, precisely, each and every time ZoneMinder is installed or upgraded. <strong>Failure to do so is guaranteed to result in a non-functional system.</strong></p></li>
</ul>
</section>
<section id="how-to-install-zoneminder">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">How to Install ZoneMinder</a><a class="headerlink" href="#how-to-install-zoneminder" title="Permalink to this heading"></a></h2>
<p>ZoneMinder releases are hosted at RPM Fusion. New users should navigate to the <a class="reference external" href="https://rpmfusion.org">RPM Fusion site</a> then follow the instructions to enable that repo.</p>
<p>In addition to <a class="reference external" href="https://rpmfusion.org">RPM Fusion</a>, RHEL users must enable the EPEL repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span>
</pre></div>
</div>
<p>RHEL 8 users must also enable the powertools repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">dnf</span><span class="o">-</span><span class="n">plugins</span><span class="o">-</span><span class="n">core</span>
<span class="n">sudo</span> <span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">enabled</span> <span class="n">powertools</span>
</pre></div>
</div>
<p>RHEL 9 users must also enable the crb repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">dnf</span><span class="o">-</span><span class="n">plugins</span><span class="o">-</span><span class="n">core</span>
<span class="n">sudo</span> <span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">enabled</span> <span class="n">crb</span>
</pre></div>
</div>
<p>Once the additional repos are enabled, install ZoneMinder from the commandline. Choose the package that matches the desired web server.</p>
<p>Install ZoneMinder for Apache web server:</p>
<aside class="sidebar">
<p class="sidebar-title">Note</p>
<p>A virtual package called zoneminder exists. This package contains no files and will pull in the zoneminder-httpd package for backwards compatibility.</p>
</aside>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">zoneminder</span><span class="o">-</span><span class="n">httpd</span>
</pre></div>
</div>
<p>Install ZoneMinder for Nginx web server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">zoneminder</span><span class="o">-</span><span class="n">nginx</span>
</pre></div>
</div>
<p>Once ZoneMinder has been installed, you <strong>must</strong> read the README file to complete the installation. Fedora users can find the README under /usr/share/doc/zoneminder-common. RHEL users can find the README under /usr/share/doc/zoneminder-common-x.xx where x.xx is the version of zoneminder.</p>
<p><strong>ZoneMinder will NOT run without completing the steps shown in the README!</strong></p>
</section>
<section id="how-to-install-nightly-development-builds">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">How to Install Nightly Development Builds</a><a class="headerlink" href="#how-to-install-nightly-development-builds" title="Permalink to this heading"></a></h2>
<p>ZoneMinder development packages, which represent the most recent build from our master branch, are available from <a class="reference external" href="https://www.zoneminder.com">zmrepo</a>.</p>
<p>The feedback we get from those who use these development packages is extremely helpful. However, please understand these packages are intended for testing the latest master branch only. They are not intended to be used on any production system. There will be new bugs, and new features may not be documented. This is bleeding edge, and there might be breakage. Please keep that in mind when using this repo. We know from our user forum that this can’t be stated enough.</p>
</section>
<section id="how-to-build-your-own-zoneminder-package">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">How to Build Your Own ZoneMinder Package</a><a class="headerlink" href="#how-to-build-your-own-zoneminder-package" title="Permalink to this heading"></a></h2>
<p>If you are looking to do development or the available packages just don’t suit you, then you can follow these steps to build your own ZoneMinder RPM.</p>
<section id="background">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Background</a><a class="headerlink" href="#background" title="Permalink to this heading"></a></h3>
<p>The following method documents how to build ZoneMinder into an RPM package, for Fedora, Redhat, Rocky Linux, and other compatible clones. This is exactly how the RPMS in zmrepo are built.</p>
<p>The method documented below was chosen because:</p>
<ul class="simple">
<li><p>All of ZoneMinder’s dependencies are downloaded and installed automatically</p></li>
<li><p>Cross platform capable. The build host does not have to be the same distro or release version as the target.</p></li>
<li><p>Once your build environment is set up, few steps are required to run the build again in the future.</p></li>
<li><p>Troubleshooting becomes easier if we are all building ZoneMinder the same way.</p></li>
</ul>
<p><strong>*IMPORTANT*</strong>
Certain commands in these instructions require root privileges while other commands do not. Pay close attention to this. If the instructions below state to issue a command without a “sudo” prefix, then you should <em>not</em> be root while issuing the command. Getting this incorrect will result in a failed build, or worse a broken system.</p>
</section>
<section id="set-up-your-environment">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Set Up Your Environment</a><a class="headerlink" href="#set-up-your-environment" title="Permalink to this heading"></a></h3>
<p>Before you begin, set up an rpmbuild environment by following <a class="reference external" href="https://wiki.centos.org/HowTos/SetupRpmBuildEnvironment">this guide</a> by the CentOS developers. These instructions apply to Rocky Linux and clones as well.</p>
<p>In addition, make sure RPM Fusion is enabled as described in the previous section <a class="reference internal" href="#how-to-install-zoneminder">How to Install ZoneMinder</a>.</p>
<p>With RPM Fusion enabled, issue the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">mock</span><span class="o">-</span><span class="n">rpmfusion</span><span class="o">-</span><span class="n">free</span> <span class="n">mock</span>
</pre></div>
</div>
<p>Add your user account to the group mock:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">gpasswd</span> <span class="o">-</span><span class="n">a</span> <span class="p">{</span><span class="n">your</span> <span class="n">account</span> <span class="n">name</span><span class="p">}</span> <span class="n">mock</span>
</pre></div>
</div>
<p>Your build environment is now set up.</p>
</section>
<section id="build-from-srpm">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Build from SRPM</a><a class="headerlink" href="#build-from-srpm" title="Permalink to this heading"></a></h3>
<p>To continue, you need a ZoneMinder SRPM. If you wish to rebuild a ZoneMinder release, then browse the <a class="reference external" href="https://rpmfusion.org/">RPM Fusion site</a>. If instead you wish to rebuild the latest source rpm from our master branch then browse the <a class="reference external" href="http://zmrepo.zoneminder.com/">Zmrepo site</a>.</p>
<p>For this example, I’ll use one of the source rpms from zmrepo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">P</span> <span class="o">~/</span><span class="n">rpmbuild</span><span class="o">/</span><span class="n">SRPMS</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">zmrepo</span><span class="o">.</span><span class="n">zoneminder</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">el</span><span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="n">SRPMS</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">-</span><span class="mf">1.31.1</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
<p>Now comes the fun part. To build ZoneMinder, issue the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">epel</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">rpmfusion_free</span> <span class="o">~/</span><span class="n">rpmbuild</span><span class="o">/</span><span class="n">SRPMS</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">-</span><span class="mf">1.31.1</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
<p>Want to build ZoneMinder for Fedora, instead of RHEL, from the same host?  Once you download the Fedora SRPM, issue the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">fedora</span><span class="o">-</span><span class="mi">26</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">rpmfusion_free</span> <span class="o">~/</span><span class="n">rpmbuild</span><span class="o">/</span><span class="n">SRPMS</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">-</span><span class="mf">1.31.1</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
<p>Notice that the mock tool requires the following parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">MOCKCONFIG</span> <span class="n">ZONEMINDER_SRPM</span>
</pre></div>
</div>
<p>The list of available Mock config files are available here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mock</span><span class="o">/*</span><span class="n">rpmfusion_free</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>You choose the config file based on the desired distro (e.g. el7, f29, f30) and basearch (e.g. x86, x86_64, arhmhfp). Notice that, when specifying the Mock config as a commandline parameter, you should leave off the “.cfg” filename extension.</p>
</section>
<section id="installation">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Installation</a><a class="headerlink" href="#installation" title="Permalink to this heading"></a></h3>
<p>Once the build completes, you will be presented with a message stating where the newly built rpms can be found. It will look similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="p">:</span> <span class="n">Results</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">logs</span> <span class="ow">in</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mock</span><span class="o">/</span><span class="n">fedora</span><span class="o">-</span><span class="mi">26</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="n">result</span>
</pre></div>
</div>
<p>Copy the newly built ZoneMinder RPMs to the desired system, enable RPM Fusion as described in <a class="reference internal" href="#how-to-install-zoneminder">How to Install ZoneMinder</a>, and then install the rpm by issuing the appropriate yum/dnf install command. Finish the installation by following the zoneminder setup instructions in the distro specific readme file, named README.{distroname}, which will be installed into the /usr/share/doc/zoneminder* folder.</p>
<p>Finally, you may want to consider editing the rpmfusion repo file under /etc/yum.repos.d and placing an “exclude=zoneminder*” line into the config file.  This will prevent your system from overwriting your manually built RPM with the ZoneMinder RPM found in the repo.</p>
</section>
<section id="how-to-create-your-own-source-rpm">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">How to Create Your Own Source RPM</a><a class="headerlink" href="#how-to-create-your-own-source-rpm" title="Permalink to this heading"></a></h3>
<p>In the previous section we described how to rebuild an existing ZoneMinder SRPM. The instructions which follow show how to build the ZoneMinder git source tree into a source rpm, which can be used in the previous section to build an rpm.</p>
<p>Make sure git and rpmdevtools are installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">git</span> <span class="n">rpmdevtools</span>
</pre></div>
</div>
<p>Now clone the ZoneMinder git repository from your home folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ZoneMinder</span><span class="o">/</span><span class="n">zoneminder</span>
<span class="n">cd</span> <span class="n">zoneminder</span>
</pre></div>
</div>
<p>This will create a sub-folder called zoneminder, which will contain the latest development source code.</p>
<p>If you have previously cloned the ZoneMinder git repo and wish to update it to the most recent, then issue these commands instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">zoneminder</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>
</div>
<p>Get the crud submodule tarball:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spectool</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">g</span> <span class="o">-</span><span class="n">R</span> <span class="o">-</span><span class="n">s</span> <span class="mi">1</span> <span class="o">~/</span><span class="n">zoneminder</span><span class="o">/</span><span class="n">distros</span><span class="o">/</span><span class="n">redhat</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
<p>Get the cakephp-enum-behavior submodule tarball:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spectool</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">g</span> <span class="o">-</span><span class="n">R</span> <span class="o">-</span><span class="n">s</span> <span class="mi">2</span> <span class="o">~/</span><span class="n">zoneminder</span><span class="o">/</span><span class="n">distros</span><span class="o">/</span><span class="n">redhat</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
<p>Get the Rtsp-Server submodule tarball:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spectool</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">g</span> <span class="o">-</span><span class="n">R</span> <span class="o">-</span><span class="n">s</span> <span class="mi">3</span> <span class="o">~/</span><span class="n">zoneminder</span><span class="o">/</span><span class="n">distros</span><span class="o">/</span><span class="n">redhat</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
<p>At this point, you can make changes to the source code. Depending on what you want to do with those changes, you generally want to create a new branch first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">zoneminder</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">mynewbranch</span>
</pre></div>
</div>
<p>Again, depending on what you want to do with those changes, you may want to commit your changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">zoneminder</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span>
</pre></div>
</div>
<p>Once you have made your changes, it is time to turn your work into a new tarball, but first we need to look in the rpm specfile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">less</span> <span class="o">~/</span><span class="n">zoneminder</span><span class="o">/</span><span class="n">distros</span><span class="o">/</span><span class="n">redhat</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
<p>Scroll down until you see the Version field. Note the value, which will be in the format x.xx.x. Now create the tarball with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">zoneminder</span>
<span class="n">git</span> <span class="n">archive</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=</span><span class="n">zoneminder</span><span class="o">-</span><span class="mf">1.33.4</span><span class="o">/</span> <span class="o">-</span><span class="n">o</span> <span class="o">~/</span><span class="n">rpmbuild</span><span class="o">/</span><span class="n">SOURCES</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">-</span><span class="mf">1.33.4</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="n">HEAD</span>
</pre></div>
</div>
<p>Replace “1.33.4” with the Version shown in the rpm specfile.</p>
<p>From the root of the local ZoneMinder git repo, execute the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">zoneminder</span>
<span class="n">rpmbuild</span> <span class="o">-</span><span class="n">bs</span> <span class="o">--</span><span class="n">nodeps</span> <span class="n">distros</span><span class="o">/</span><span class="n">redhat</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
<p>This step will create a source rpm and it will tell you where it was saved. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Wrote</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">abauer</span><span class="o">/</span><span class="n">rpmbuild</span><span class="o">/</span><span class="n">SRPMS</span><span class="o">/</span><span class="n">zoneminder</span><span class="o">-</span><span class="mf">1.33.4</span><span class="o">-</span><span class="mf">1.</span><span class="n">fc26</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
<p>Now follow the previous instructions <a class="reference internal" href="#build-from-srpm">Build from SRPM</a> which describe how to build that source rpm into an rpm.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="debian.html" class="btn btn-neutral float-left" title="Debian" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="windows_wsl.html" class="btn btn-neutral float-right" title="Windows 10+ using WSL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014, https://github.com/ZoneMinder/ZoneMinder/graphs/contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>