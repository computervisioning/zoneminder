<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Options - Storage &mdash; ZoneMinder  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/zmstyle.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Options - Web" href="options_web.html" />
    <link rel="prev" title="Options - Servers" href="options_servers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ZoneMinder
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installationguide/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../definemonitor.html">Defining Monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../definezone.html">Defining Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viewmonitors.html">Viewing Monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filterevents.html">Filtering Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viewevents.html">Viewing Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tags.html">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tags.html#filtering-with-tags">Filtering with Tags</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../options.html">Options</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="options_display.html">Options - Display</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_system.html">Options - System</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_config.html">Options - Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_api.html">Options - API</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_servers.html">Options - Servers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Options - Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#s3-storage-setup">S3 storage setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_web.html">Options - Web</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_images.html">Options - Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_logging.html">Options - Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_network.html">Options - Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_email.html">Options - Email</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_upload.html">Options - Upload</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_x10.html">Options - X10</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_bw.html">Options - High, Medium and Low B/W</a></li>
<li class="toctree-l3"><a class="reference internal" href="options_users.html">Options - Users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cameracontrol.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cameracontrol.html#controlling-monitors">Controlling Monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mobile.html">Mobile Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configfiles.html">Configuration Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ZoneMinder</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="../options.html">Options</a></li>
      <li class="breadcrumb-item active">Options - Storage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/userguide/options/options_storage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="options-storage">
<h1>Options - Storage<a class="headerlink" href="#options-storage" title="Permalink to this heading"></a></h1>
<img alt="../../_images/Options_Storage.png" src="../../_images/Options_Storage.png" />
<p>Storage tab is used to setup storage areas for recorded Events. To add a new area use the Add New Storage button.</p>
<p>By default storage on local drive is automatically set up on installation. When no area is specified events will be
stored to a default built-in location, which for example on Ubuntu is /var/cache/zoneminder/events.</p>
<p>Name: Storage names - can be anything</p>
<p>Path: String path to storage location for example /media/Videos</p>
<p>Url: Used for S3 communication - format <code class="docutils literal notranslate"><span class="pre">s3fs://ACCESS_KEY_ID:SECRET_ACCESS_KEY&#64;s3.ca-central-1.amazonaws.com/bucket-name/events</span></code></p>
<dl class="simple">
<dt>Supported storage types:</dt><dd><ul class="simple">
<li><p>Local
- Local/mounted or network storage in local network</p></li>
<li><p>s3fs
- S3 mounted drive</p></li>
</ul>
</dd>
</dl>
<p>Some users may require more advanced storage such as S3 provided by amazon or others.</p>
</section>
<section id="s3-storage-setup">
<h1>S3 storage setup<a class="headerlink" href="#s3-storage-setup" title="Permalink to this heading"></a></h1>
<p>You must use s3fs to mount the S3 bucket in your fs tree.  Telling ZoneMinder that the location is S3 will let it use
more efficient code to send and delete the event data.
The Do Deletes option tells ZoneMinder whether to actually perform delete operations when deleting events.  S3fs systems often do deletes in a cron job or other background task and doing the deletes can overload an S3 system.</p>
<p>Refer to this guide for installation and configuration of s3fs - <a class="reference external" href="https://github.com/s3fs-fuse/s3fs-fuse">https://github.com/s3fs-fuse/s3fs-fuse</a></p>
<p>Adding credentials to passwd_file</p>
<p>Create credentials file <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">ACCESS_KEY_ID:SECRET_ACCESS_KEY</span> <span class="pre">&gt;</span> <span class="pre">/etc/passwd-s3fs</span></code></p>
<p>Set file permissions <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">600</span> <span class="pre">/etc/passwd-s3fs</span></code></p>
<dl class="simple">
<dt>S3 mounting with fstab</dt><dd><p><code class="docutils literal notranslate"><span class="pre">s3fs#bucket_name</span> <span class="pre">/media/S3</span> <span class="pre">fuse</span> <span class="pre">_netdev,allow_other,uid=33,url=https://s3.ca-central-1.amazonaws.com,passwd_file=/etc/passwd-s3fs,umask=022</span> <span class="pre">0</span> <span class="pre">0</span></code></p>
</dd>
<dt>Setting up storage.</dt><dd><ol class="arabic simple">
<li><p>Click on Add new Storage</p></li>
<li><p>Set path to <code class="docutils literal notranslate"><span class="pre">/media/S3</span></code></p></li>
<li><p>Add Url <code class="docutils literal notranslate"><span class="pre">s3fs://username:password&#64;s3.ca-central-1.amazonaws.com/bucket-name/events</span></code></p></li>
<li><p>Set type to s3fs</p></li>
<li><p>Save settings and monitor logs for errors</p></li>
</ol>
</dd>
</dl>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="options_servers.html" class="btn btn-neutral float-left" title="Options - Servers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="options_web.html" class="btn btn-neutral float-right" title="Options - Web" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014, https://github.com/ZoneMinder/ZoneMinder/graphs/contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>